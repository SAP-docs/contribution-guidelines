"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VariableResolver = void 0;
const tslib_1 = require("tslib");
const helpers_1 = require("./helpers");
class VariableResolver {
    constructor(config$) {
        // eslint-disable-next-line @typescript-eslint/no-this-alias
        const that = this;
        this.config = new Promise(resolve => {
            config$.subscribe((config) => {
                // Resolve initial promise and create a new one for updated config
                resolve(config);
                that.config = Promise.resolve(config);
            });
        });
    }
    resolveVariable(variableName) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const conf = yield this.config;
            return helpers_1.resolvePath(conf.extra, variableName);
        });
    }
}
exports.VariableResolver = VariableResolver;
VariableResolver.VARIABLE_REGEX = /\{\{\s*(\S+)\s*\}\}/g;
//# sourceMappingURL=resolver.js.map