!function(e){function t(r){if(s[r])return s[r].exports;var a=s[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var s={};return t.m=e,t.c=s,t.p="assets/",t(0)}([function(e,t,s){"use strict";s(1)(self)},function(e,t,s){"use strict";var r=s(2);e.exports=function(e){function t(e,t){var s,r=t||e;return s=t?e:0,s+Math.floor(r*Math.random())}function s(e){this.examplePieces=e,this.rules=c(h),this.numStepsWithoutChange=0,this.examplesNeeded=r.difference(Object.keys(h.rules),Object.keys(e)),l.postMessage({name:"received:neededExamples",args:[this.examplesNeeded]}),this.currentRuleIndex=0}function a(){f=new s({}),n(f,100)}function n(e,t){t=t||1,r.repeat(t,function(){e.next()}),e.examplesNeeded.length>0&&!e.paused&&setTimeout(function(){n(e,t)},0)}function i(e){m=e.createSemantics(),m.addOperation("addPiecesToDict(dict)",{_nonterminal:function(e){var t=this.ctorName,s=this.args.dict;s.hasOwnProperty(t)||(s[t]=[]),r.includes(s[t],this.source.contents)||s[t].push(this.source.contents),e.forEach(function(e){e.addPiecesToDict(s)})},_terminal:function(){}})}function c(e){var t=[];return Object.keys(e.rules).forEach(function(s){o(s,e)||t.push(s)}),t}function o(e,t){return t.rules[e].formals.length>0}function u(e){var t=p.ohmGrammar.match(e,"Base_application");return p._buildGrammar(t)}function d(e){return e.charAt(0).toUpperCase()===e.charAt(0)}var l=e;l.ohm||l.importScripts("../assets/ohm.min.js");var p=l.ohm;l.postMessage("WORKER STARTED");var h,m,f,x={ident:function(e,t,s,r){return{needHelp:!0}},ctor:function(e,t,s,r){return{needHelp:!0}},letter:function(e,s,r,a){return 0===t(2)?{example:String.fromCharCode(t(26)+"a".charCodeAt(0))}:{example:String.fromCharCode(t(26)+"A".charCodeAt(0))}}};return l.addEventListener("message",function(e){switch(l.postMessage(e.data.name),e.data.name){case"initialize":h=p.makeRecipe(e.data.recipe),i(h);var t=!0;e.data.hasOwnProperty("start")&&(t=e.data.runStart),t&&a();break;case"request:examples":var s=e.data.args[0],n=f.examplePieces[s]||null;l.postMessage({name:"received:examples",args:[s,n]});break;case"update:neededExamples":f.examplesNeeded=r.difference(Object.keys(h.rules),Object.keys(f.examplePieces)),l.postMessage({name:"received:neededExamples",args:[f.examplesNeeded]});break;case"add:userExample":s=e.data.args[0];var c=e.data.args[1];f.processExampleFromUser(c,s)}}),s.prototype.processExampleFromUser=function(e,t){var s=this;if(t){var r=h.match(e,t);r.succeeded()&&m(r).addPiecesToDict(this.examplePieces)}else Object.keys(h.rules).forEach(function(t){var s=h.match(e,t);s.succeeded()&&m(s).addPiecesToDict(this.examplePieces)});var a=this.examplesNeeded.length;this.examplesNeeded=this.examplesNeeded.filter(function(e){return!s.examplePieces.hasOwnProperty(e)}),this.examplesNeeded.length<a&&l.postMessage({name:"received:neededExamples",args:[this.examplesNeeded]}),this.paused&&(this.paused=!1,n(f,100))},s.prototype.next=function(){var e=this.rules[this.currentRuleIndex],t=this,s=this.examplesNeeded.slice();r.repeat(2,function(){t.generateExampleForRule(e)}),this.examplesNeeded.length!==s.length?this.numStepsWithoutChange=0:(this.numStepsWithoutChange++,this.numStepsWithoutChange>2*this.rules.length&&(this.paused=!0)),this.currentRuleIndex=(this.currentRuleIndex+1)%this.rules.length},s.prototype.generateExampleForRule=function(e){var t,s=this,a=u(e);t=x.hasOwnProperty(e)?x[e](h,this.examplePieces,d(a.ruleName),a.args):h.rules[a.ruleName].body.generateExample(h,this.examplePieces,d(a.ruleName),a.args),t.hasOwnProperty("value")&&h.match(t.value,e).succeeded()&&(r.includes(this.examplesNeeded,e)&&(this.examplesNeeded=this.examplesNeeded.filter(function(t){return t!==e}),l.postMessage("generated "+e+" "+JSON.stringify(this.examplesNeeded)),l.postMessage({name:"received:neededExamples",args:[this.examplesNeeded]})),this.examplePieces.hasOwnProperty(e)||(this.examplePieces[e]=[]),r.includes(this.examplePieces[e],t.value)||this.examplePieces[e].push(t.value)),t.hasOwnProperty("examplesNeeded")&&t.examplesNeeded.forEach(function(e){r.includes(s.rules,e)||s.rules.push(e)})},{ExampleGenerator:s}}},function(e,t){"use strict";function s(e,t){Object.keys(e).forEach(function(s){return t(s,e[s],e)})}"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var s=arguments[t];if(null!=s)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}),e.exports={objectForEach:s,objectMap:function(e,t){return Object.keys(e).map(function(s){return t(s,e[s],e)})},repeat:function(e,t){if(!(e<0))for(;e>0;)t(),e--},shuffle:function(e){var t,s,r;for(r=e.length;r;r-=1)t=Math.floor(Math.random()*r),s=e[r-1],e[r-1]=e[t],e[t]=s},difference:function(e,t){return e.filter(function(e){return t.indexOf(e)===-1})},includes:function(e,t){return e.indexOf(t)!==-1}}}]);